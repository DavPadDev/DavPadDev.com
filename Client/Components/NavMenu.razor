<nav class="top-nav">
    <div class="brand">
        DavPadDev
    </div>

    <button class="menu-toggle" @onclick="ToggleNav">
        <span class="menu-icon">&#9776;</span>
    </button>

    <div class="nav-links @( _navOpen ? "open" : "" )">
        <NavLink href="/" @onclick="CloseNav">Home</NavLink>
        <NavLink href="/about" @onclick="CloseNav">About</NavLink>
        <NavLink href="/projects" @onclick="CloseNav">Projects</NavLink>
        <NavLink href="/resume" @onclick="CloseNav">Resume</NavLink>
        <NavLink href="/contact" @onclick="CloseNav">Contact</NavLink>
    </div>
</nav>

@code {
    private bool _navOpen = false;

    private void ToggleNav()
        => _navOpen = !_navOpen;

    private void CloseNav()
        => _navOpen = false;

    // This is callable from JS
    [JSInvokable]
    public static void CollapseFromScroll()
    {
        _instance?._Collapse();
    }

    private void _Collapse()
    {
        _navOpen = false;
        StateHasChanged();
    }

    private static NavMenu? _instance;

    protected override void OnInitialized()
    {
        _instance = this;
    }
}
